<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="Interactive.css">
        <link href="https://fonts.googleapis.com/css?family=PT+Sans:400,700" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    </head>

    <body>
    <div id = "calculator">
      <input type="number" id="score">Score</input><br>
      <input type="number" id="wkts">Wickets</input><br>
      <input type="number" id="overs">Overs</input><br>
      <input type="number" id="totovers" value="50">Total Overs</input><br><br>
      <input type="number" id="bat1">Bat1</input><br>
      <input type="number" id="bat2">Bat2</input><br><br>
    </div>

  <button type="submit" onclick="calculate()">submit</button>


    </body>

    <script>

    var score, wkts, overs, bat1, bat2, totovers;
    var avg=[];   //of entire team
    var sr=[];

    for (i=0;i<11;i++)
    {
      $('#calculator').append('<input type="number" id="avg'+i+'">Avg'+i+'</input><br> ');
    }
    $('#calculator').append('<br>');

    for (i=0;i<11;i++)
    {
      $('#calculator').append('<input type="number" id="sr'+i+'">SR'+i+'</input><br> ');
    }
    $('#calculator').append('<br>');



    function calculate()
    {
      var score = document.getElementById("score").value;
      var wkts = document.getElementById("wkts").value;
      var overs = document.getElementById("overs").value;
      var totovers = document.getElementById("totovers").value;
      var bat1 = document.getElementById("bat1").value;
      var bat2 = document.getElementById("bat2").value;

      for (i=0;i<11;i++)
      {
        var temp = document.getElementById('avg'+i).value;
        avg.push(temp);
      }

      for (i=0;i<11;i++)
      {
        var temp = document.getElementById('sr'+i).value;
        sr.push(temp);
      }


      var remballs, totballs;
      totballs=(parseFloat(totovers).toFixed(0)*6)+((parseFloat(totovers)-parseFloat(totovers).toFixed(0))*10);
      remballs=totballs-(parseFloat(overs).toFixed(0)*6)-Math.round(((parseFloat(overs)-parseFloat(overs).toFixed(0))*10));
      console.log()

      var preavgout, actavgout, presrout, actsrout, avgconst, srconst;
      var countavg=0;
      var countsr=0;
      for (i=0;i<parseFloat(wkts)+2;i++)
      {
        countavg+=parseFloat(avg[i]);
        countsr+=parseFloat(sr[i]);
      }
      preavgout=countavg/(parseFloat(wkts)+2);
      actavgout=parseFloat(score)/parseFloat(wkts);
      presrout=countsr/(parseFloat(wkts)+2);
      actsrout=(parseFloat(score)/(totballs-remballs))*100;
      avgconst=actavgout/preavgout;
      srconst=actsrout/presrout;

      bat1=parseFloat(bat1);
      bat2=parseFloat(bat2);
      var onfield=parseFloat(wkts);
      var projected=parseFloat(score)-(bat1+bat2);

      while ((onfield<10)&&(remballs>0))
      {console.log(onfield,remballs,projected)
        if ((bat1<(parseFloat(avg[onfield])*avgconst))&&(bat2<(parseFloat(avg[onfield+1])*avgconst)))
        {
          bat1+=(parseFloat(sr[onfield])*srconst)/200;
          bat2+=(parseFloat(sr[onfield+1])*srconst)/200;
          remballs--;
        }
        else
        {
          if (bat1>=(parseFloat(avg[onfield])*avgconst))
          {
            projected+=bat1;
            bat1=bat2;
            bat2=0;
          }
          else
          {
            projected+=bat2;
            bat2=0;
          }
          onfield++;
        }
      }
      console.log(bat1,bat2)
      projected+=(bat1+bat2);
      console.log(Math.round(projected))

    }


    </script>
